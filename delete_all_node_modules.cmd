@echo off

REM Usage: delete_node_modules.bat "C:\path\to\root"

IF "%~1"=="" (
    echo Usage: %~nx0 "C:\path\to\root"
    exit /b 1
)

SET ROOT_DIR=%~1

echo Passed argument is: "%ROOT_DIR%"
echo Deleting all node_modules directories recursively from "%ROOT_DIR%"...

for /d /r "%ROOT_DIR%" %%d in (node_modules) do (
    if exist "%%d" (
        echo Removing "%%d"
        rd /s /q "%%d"
    )
)

echo Completed.
pause